
##################################################################################
###############################   pyReDA   #######################################
##################################################################################

#########################################
#########################################
#########################################
Description :
#########################################

The python code performs the data assimilation using precomputed ROM coefficients and ROM noise statistics.
The main script is super_main_from_existing_ROM.py
Most parameters have to be specified in run_info.txt

ROM coefficients, ROM noise statistics and test basis (for assimilation and validation) can be genereated either from C++ code redlumcpp (based on ITHACA-FV & OpenFOAM) and/or from the MATLAB code podfs2 (using Incompact3D data).

Synthetic PIV data and reduced observation model can be generated by a tcsh script contained in this repository. 
tcsh util/install_tools.csh 	>>>  installs the needed dependencies.
tcsh openfoamDNS_to_pseudoPIV_all.csh 	>>>  generate the synthetic PIV data and reduced observation model.
(cf util/README.tx for more information)


#########################################
#########################################
#########################################
Authors & citations :
#########################################

Authors :
Laurence Wallian, Valentin Resseguier

How to cite:
Resseguier, V., Ladvig, M., & Heitz, D. (2022). Real-time estimation and prediction of unsteady flows using reduced-order models coupled with few measurements. Journal of Computational Physics, 471, 111631.

#########################################
#########################################
#########################################
Installation :
#########################################

1) (If needed,) 
Install anaconda, including spyder, python 3.*, etc

#########################################

2) Create the environment mecflu from environment.yml  as follow :
Go the code folder, and from the conda terminal, enter:

conda env create -f environment.yml
conda activate mecflu
conda update --all
conda install -c anaconda hdf5
conda update spyder
spyder

## These commands will install the correct version of python packages.
More information about virual environement 
https://uoa-eresearch.github.io/eresearch-cookbook/recipe/2014/11/20/conda/

## Alternative commands :

conda env create -f environment.yml
conda activate mecflu
conda update spyder
conda install -c conda-forge qtpy
 conda install qt=5 pyqt=5 qtpy=1.1.2 --force
conda install PySide
conda remove spyder
conda install -c anaconda spyder
conda install -c anaconda pyqt
pip uninstall PyQt5
pip uninstall spyder
conda install -c anaconda spyder
pip uninstall QtPy
conda install --force-reinstall QtPy qt
conda install --force-reinstall pyqt qt
pip uninstall PyQt5
conda install --force-reinstall pyqt qt
conda install -c anaconda hdf5
spyder

#########################################

## Alternative install commands on Ubuntu 20.04 :

sudo bash Anaconda3-2021.11-Linux-x86_64.sh -u -b -p "/usr/local/anaconda3"
conda create --name mecflu
conda activate mecflu
conda config --env --add channels conda-forge
conda install -c anaconda spyder 
conda install -c conda-forge matplotlib 
conda install -c anaconda numpy 
conda install -c anaconda scipy 
conda install -c conda-forge hdf5storage 
conda install -c anaconda h5py 
conda install -c anaconda scikit-learn 
conda install -c conda-forge openmp 
conda update --all

#########################################

3) Always work from in this environnement.

Example with spyder:

Open "Spyder(mecflu)"

Or,
from a conda terminal:

conda activate mecflu
spyder
